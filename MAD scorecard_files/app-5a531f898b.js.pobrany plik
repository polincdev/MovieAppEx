"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}!function(){var e=".checkbox__input",t=".category-features";function r(r){var o=r.target.closest(t),n=o.dataset.cardId,i=o.querySelectorAll(e),c={};i.forEach((function(e){e.disabled=!0;var t=e.id.slice("toggle-".length),r=e.checked;c[t]=r})),fetch("/api/v1/card/".concat(n,"/"),{method:"PUT",body:JSON.stringify({details:c}),headers:{"Content-Type":"application/json"}}).then((function(e){e.ok||e.json().then((function(e){console.error("Error while updating card ".concat(n,"."),e)}))})).finally((function(){i.forEach((function(e){e.disabled=!1}))}))}Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(Element.prototype.matches.call(t,e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null}),document.addEventListener("DOMContentLoaded",(function(){var t,o,n,i,c=document.querySelectorAll(e),s=(t=r,o=1e3,function(){for(var e=arguments.length,r=new Array(e),c=0;c<e;c++)r[c]=arguments[c];var s=function(){i=null,n||t.apply(void 0,r)},a=n&&!i;clearTimeout(i),i=setTimeout(s,o),a&&t.apply(void 0,r)});c.forEach((function(e){e.addEventListener("change",s)}))}))}();var NAME="ace",DISCLOSURE="".concat(NAME,"-disclosure"),IMG="faq__arrow",ALT_CLOSED="FAQ answer is not visible",ARROW_OPEN_CLASS="rotate-arrow",ALT_OPEN="FAQ answer is visible",ATTRS={TRIGGER:"".concat(DISCLOSURE,"-trigger-for"),TRIGGER_SHOW:"".concat(DISCLOSURE,"-trigger-show"),TRIGGER_HIDE:"".concat(DISCLOSURE,"-trigger-hide"),VISIBLE:"".concat(DISCLOSURE,"-visible")},Disclosure=function(){function e(t){var r=this;_classCallCheck(this,e),this.el=t,this.id=this.el.id,this.number=this.id.split("-")[2],this.triggerSelector="[".concat(ATTRS.TRIGGER,"=").concat(this.id,"]"),this.arrowSelector="#".concat(IMG,"-").concat(this.number),this.setDisclosure=this.setDisclosure.bind(this),this.windowClickHandler=this.windowClickHandler.bind(this),this.triggerEls=document.querySelectorAll(this.triggerSelector),this.arrow=document.querySelector(this.arrowSelector);var o=this.el.hasAttribute(ATTRS.VISIBLE);this.el.setAttribute(ATTRS.VISIBLE,o),this.triggerEls.forEach((function(e){e.setAttribute("aria-controls",r.id),e.setAttribute("aria-expanded",o)})),window.addEventListener("click",this.windowClickHandler,{passive:!0})}return _createClass(e,[{key:"setDisclosure",value:function(e){var t="true"===this.el.getAttribute(ATTRS.VISIBLE);e&&t||(!1!==e||t)&&(null==e&&(0==t?(this.arrow.classList.add(ARROW_OPEN_CLASS),this.arrow.alt=ALT_OPEN):(this.arrow.classList.remove(ARROW_OPEN_CLASS),this.arrow.alt=ALT_CLOSED),e=!t),this.el.setAttribute(ATTRS.VISIBLE,e),this.triggerEls.forEach((function(t){return t.setAttribute("aria-expanded",e)})))}},{key:"windowClickHandler",value:function(e){var t=e.target.closest(this.triggerSelector);if(t){var r=null;t.hasAttribute(ATTRS.TRIGGER_SHOW)&&(r=!0),t.hasAttribute(ATTRS.TRIGGER_HIDE)&&(r=!1),this.setDisclosure(r)}}}]),e}();document.addEventListener("DOMContentLoaded",(function(){document.querySelectorAll("[".concat(DISCLOSURE,"]")).forEach((function(e){return new Disclosure(e)}))}));var CLASSES={CARD:"card",CIRCLE:"scroll--circle",ACTIVE:"scroll--active",ACTIVE_WHITE:"scroll--active-white",UP_ARROW:"up-arrow",DOWN_ARROW:"down-arrow"},cards=document.querySelectorAll(".".concat(CLASSES.CARD)),scrollUp=document.querySelectorAll(".".concat(CLASSES.UP_ARROW)),scrollDown=document.querySelectorAll(".".concat(CLASSES.DOWN_ARROW)),sections=[],options={root:null,threshold:.5},observer=new IntersectionObserver((function(e){e.forEach((function(e){var t=e.target.id,r=document.querySelectorAll('a[data-category = "'.concat(t,'-circle"]'));e.isIntersecting?r.forEach((function(e){"summary"===t?e.classList.add(CLASSES.ACTIVE_WHITE):e.classList.add(CLASSES.ACTIVE)})):r.forEach((function(e){e.classList.remove(CLASSES.ACTIVE),e.classList.remove(CLASSES.ACTIVE_WHITE)}))}))}),options);function scrollPages(e){var t,r=e.composedPath()[1],o=r.getAttribute("data-category"),n=sections.indexOf(o);if(r.className.split(" ").includes(CLASSES.UP_ARROW)){if(0===n)return;t=n-1}else{if(n===sections.length-1)return;t=n+1}var i="#".concat(sections[t]);window.location.href=i}cards.forEach((function(e){observer.observe(e),sections.push(e.id)})),scrollUp.forEach((function(e){e.addEventListener("click",scrollPages)})),scrollDown.forEach((function(e){e.addEventListener("click",scrollPages)}));